---
import { ExternalLinkIcon } from "lucide-react";
import { Card, CardContent, CardFooter, CardHeader } from "./ui/card";
import { Image } from "astro:assets";

interface Props {
	project: string;
}
const { project } = Astro.props;

const allImages = import.meta.glob<{ default: ImageMetadata }>("/src/assets/*.{jpeg,jpg,png,gif}");

const projectString = `/src/assets/${project}-1.png`;

let previewImg;
for (let key in allImages) {
	if (key === projectString) {
		previewImg = allImages[key];
	}
}

if (!previewImg) {
	throw new Error("No image found for project: " + project);
}
---

<Card className="">
	<CardHeader>
		<slot name="title" />
		<!-- <p
			transition:name={`${project}-title`}
			class="text-white text-2xl font-serif font-semibold leading-none tracking-tight"
		>
			SideprojectAI
		</p> -->
	</CardHeader>
	<CardContent className="flex flex-wrap sm:flex-nowrap items-center gap-6 ">
		<div class="sm:basis-1/2 space-y-5">
			<slot name="description" />
			<!-- <p>
				SideprojectAI is a platform that lets you easily generate resume sections for any GitHub repository
				using AI. Try it out now at {""}
				<a
					target="_blank"
					href="https://usesideprojectai.com/"
					class="inline-flex items-center underline underline-offset-4 gap-1"
					href=""
				>
					usesideprojectai.com! <ExternalLinkIcon />
				</a>
			</p> -->
			<slot name="technologies" />
			<!-- <p>
				Technologies used: Next.js, React.js, Typescript, TailwindCSS, Langchain, MySQL, Node.js, Serverless
				Functions.{" "}
			</p> -->
		</div>
		<a class="sm:basis-1/2 h-52 rounded-xl" href={`/${project}`}>
			<Image transition:name={`${project}-image`} alt="" class="rounded-xl" src={previewImg()} />
		</a>
	</CardContent>
	<CardFooter className="gap-3">
		<slot name="links" />
		<!-- <a target="_blank" class="font-source inline-flex items-center gap-1" href="https://usesideprojectai.com/">
			<p>Visit Website</p>
			<ExternalLinkIcon />
		</a> -->
	</CardFooter>
</Card>
